Programme Armaguedon Version 1.0

(c) Copyright Pécan Inc 2014


I- Introduction.

Ce programme permet de calculer le moment de départ des nos armées, saboteurs et sièges de plusieurs endroits
et joueurs différents pour que l'attaque soit synchronisée à la minute près lors de l'arrivé des troupes. Le 
programme prend essentiellement comme argument le temps dans laquelle l'attaque va être porter et les coordonnés
en X et Y de la cible. Le programme utilise un fichier d'initilisation qui est propre à chacun des utilisateurs. 

II- Installation

A) Pré-requis à l'installation du programme Armaguedon.

Le programme Armageddon a besoin de DLL suppélmentaire pour fonctionner. À la première installation d'une version,
il faut aller sur le site:
	www.microsoft.com/fr-ca/download/details.aspx?id=30679

Cliquez sur "Télécharger", cocher ensuite "VSU4\vcredist_x86.exe" et cliquez sur le bouton "suivant". Suivez les
instruction pour installer le module (Il faut exécuter "vcredist_x86.exe"). Il est possible qu'il faut redémarer
l'ordinateur après avoir terminer l'installation.

Le programme et sa base de données sont gardés sur un serveur public GIT. Il vous faut un logiciel pour accéder
à ce serveur. Le programme TortoiseGit permet de faire simplement ce travail. On peut downloader le logiciel à 
partir du site:
	http://code.google.com/p/tortoisegit/

Accédez à la page downoload de la dernière version du logiciel. L'application vient en deux déclinaisons 32 bits
et 64 bits. Ces deux versions sont équivalentes du point de vue des fonctionnalités. Choisissez de préférence, la
même déclinaison que votre système d'exploitation. N'oubliez pas qu'il y aura un deuxième download sur cette même
page pour le module linguistique qui permet l'utilisation de TortoiseGIT dans la langue de votre choix. Il est
fort probable que le système demandera un redémarrage de votre ordinateur puisque le logiciel TortoiseGIT fourni,
entre autre, une justine ("adds-ins") à l'explorateur de Windows.

B) Installation du programme Armaguedon

Choisissez par l'intermédiaire de l'explorateur de Windons, un répertoire où vous désirez installer le programme 
Armaguedon. Faites un clic droit sur ce répertoire et choisissez le menu contextuel "GIT cloner...". Une fenêtre
apparaîtra avec une demande d'un URL, veuillez taper les informations suivantes:
	https://github.com/ChristianRob/Armaguedon.git	

Puis, cliquez le bouton "OK". Le programme devra downloader les fichiers et répertoires suivants:
	- Lisez-moi.txt qui contient les principales instructions pour le fonctionnement de ce programme:
	- Armaguedon.exe qui est l'exécutable de la dernière version du programme
	- Arma.zip qui est un fichier compressé du fichier Arma.ini vide
	- Un ensemble de sous-répertoire correspondant à la base de donnée du programme Armaguedon. Note: Il y a 
	  de répertoire que de serveurs où le programme est fonctionnel. Le nom des répertoires correspond au nom
	  du serveur.

C) Première utilisation du programe Armaguedon

Le programme Armaguedon utilise un fichier d'initialisation lors de son lancement. Il faut que ce fichier soit 
convenablement remplis pour que le programme s'exécute correctement. Un fichier vierge est contenu dans le
fichier compressé "Arma.zip". Veuillez décompresser ce fichier dans ce même répertoire. Nous nous retrouvons 
alors avec un fichier vierge "Arma.ini". Veuillez alors compléter les champs de ce fichier selon les indications
de la section IV).

Le fichier "arma.ini" décrit le contexte d'utilisation du programme Armaguedon. Il devrait demeurer identique 
d'une version à l'autre à l'exception de la clé de sécurité qui est techniquement à renouveller à chaque mois.
Pour des raisons de sécurité, cette clé doit être demander via un email particulier au chef de l'ordre.

Note: Quelques joueurs sont présents sur plusieurs serveurs. Dans ce cas, il faut changer la configuration du
	  fichiers "Arma.ini" à chaque fois que l'on utilise le programme Armaguedon sur un serveur de jeux
	  différents. Il faut se rappeler que le programme Armaguedon est valable pour l'ensemble des serveurs 
	  mais que son bon fonctionnement est tributaire d'une initialisation correcte. 

D) Accès la fenêtre de lancement du programme Armaguedon.

Le programme Armaguedon est un programme console Windows. Un double clic sur l'icone du programme ne donnera rien
(Sauf potentiellement, l'apparition d'un écran vide). Pour lancer le programme Armaguedon, il faut l'éxécuter à
partir d'une fenêtre d'"invite de commandes". L'accès à cette fenêtre est différente selon notre système
d'exploitation:
	= Système antérieur à Windows 8
		i. Cliquer l'option "Tous les programmes" dans le bouton "Démarrer" (En bas à gauche)
		ii. Dans le nouveau menu déroulant, cliquer sur le menu "Accessoires"
		iii. Enfin, cliquer sur le menu "Invite de commandes", une fenêtre noir apparaitra.

	= Système Windows 8 et plus
		i. Cliquer sur l'icone "Bureau"
		ii. Faire un clic droit sur l'icone "Windows", en bas à gauche.
		iii. Cliquer sur le menu "Invite de commandes", une fenêtre noir apparaitra.

E) Préparation du lancement du programme

Pour lancer le programme Armaguedon dans la fenêtre de L'"invite de commandes", il faut se déplacer dans le 
répertoire où est situé le programme. La commande cd ("Change directory") permet de changer ce répertoire. Pour 
remonter l'arborescence, faire cd.. (Autant de fois que nécessaire pour remonter à la racine, c'est à dire jusqu'au
prompt C:\> 
Par la suite, tapez le chemin des répertoires pour se placer dans le même répertoire que l'exécutable. Cela se fait
toujours avec la commande "cd" suivi du nom de ou des répertoires (Séparé par des \). À noter qu'il faut entourer 
avec des "" si le nom d'un répertoire contient un espace. À la fin de ses manipulations, la commande "dir" devra
donner la liste des fichiers du répertoire.

 F) Raccourci pour l'invite de commande.

 Les étapes D) et E) peuvent devenir pénible à exécuter à chaque utilisation ou scéance d'utilisation. On peut
 créer un racourci de l'"invite de commande". On prendra soin de mettre l'option du répertoire d'ouverture dans
 les menus du racourci (Clic droit sur l'icone)

III- Lancement du programme

le programme Armaguedon est lancé dans une fenêtre "invite de commande" en tapant le nom du programme suivi de la 
liste de ses arguments. Il faut mentionné le chemin du programme ou de se déplacer dans le répertoire  qui contient 
le programme. La ligne de commande se présente comme suit:

Armaguedon [-i Nom_du_joueur] [-I Nom_de_l_ordre] [-M Fichier_de_modification] [-s] [-U Numéro_de_l_univers]
		   Heure_de_l_attaque CibleX CibleY [Heure_de_l_attaque_1 CibleX_1 CibleY_1] [...]

Où:

[] indique des arguments optionnels.
Heure_de_l_attaque : Heure désiré de l'attaque.
CibleX : Coordonnée de la cible en X.
CibleY : Coordonnée de la cible en X.
[Heure_de_l_attaque_N CibleX_N CibleY_N] : Triplet {heure désiré, cible en X, cible en Y} pour N autres cibles...

-i:		 Imprime les châteaux d'un joueur avec leurs coordonnées, s'il y a lieu. Note: Ne fonctionne pas pour les
		 membres de notre ordre ou les joueurs des ordres alliés.
-I:		 Imprime le nom des joueurs appartenant à un ordre.
-M:      Signifie que l'argument qui suit est votre nom de joueur. Votre profil sera mis à jour dans la base de
         données. L'argument "Fichier_de_modification" est le nom d'un fichier texte (*.txt) qui contient les noms
		 de vos chateaux et leurs coordonnées. Il est spécifié sans extension. La mise à jour manuelle de la base de
		 donnée du programme est nécessaire que si vos châteaux ont changé de localisation, l'apparition de nouveaux
		 ou la disparition de d'autres. Cette option permet de faire une correction en attendant la livraison d'une
		 mise à jour du programme. Pour obtenir ce fichier, il suffit de faire un "copie/coller" de votre liste de
		 château et de les écrire dans un fichier. Le nom du fichier est obligatoirement votre nom de joueur (en
		 respectant les majuscules s'il y a lieu) suivi de l'extension ".txt"
-s:      Cette option ajoute le temps pour faire un siège dans la liste des résultats.
-U:		 Permet de sélectionner le monde auquel on désire des résultats. Cette commande s'adresse uniquement aux 
		 joueurs ayant des comptes sur plusieurs serveurs. L'argument qui suit l'option est le numéro du monde que
		 l'on désire. Voir la définition du fichier d'initialisation à la section IV.

Note: Ce programme ne peut pas être lancé en double cliquant son icône car il ne s'agit pas d'un programme Windows
	  proprement dit. En exécutant, le programme Armaguedon de cette manière, vous obtiendrez au mieux une fenêtre
	  qui s'affiche brièvement sans aucun résultat ou, dans le pire des cas, un message système que cette applica-
	  tion est incompatible avec votre système d'exploitation (Comme par exemple sous Windows 8.1)

IV- Fichier d'initialisation

Ce fichier doit être placé dans le même répertoire que le programme. Il est nommé "Arma.ini" et il contient les
informations (lignes) suivantes:
	Monde=
	Ordre=
	Joueur=
	UTC=
	Clé=
	BaseDeDonnées=  

Où les champs signifient:
	Monde:		  est le nom du serveur. Cela correspond aux premières du site internet du serveur. Pour les 
				  joueurs sur plusieurs serveurs, on peut mettre les autres serveurs à la suite séparée par des
				  virgules. Le premier serveur est celui par défaut (Index 0 pour l'option "-U"). La sélection 
				  du serveur suivant peut se faire par l'intermédiaire de l'option "-U" et de son argument. Par 
				  exemple, la valeur 1 indiquera la première valeur après celle par défaut. 
 	Ordre:		  est les initiales de l'ordre en majucules auquel on appartient. Pour les joueurs sur 
				  plusieurs serveurs, on peut mettre notre ordre sur le autres serveurs séparées par des 
				  virgules. Le premier est l'ordre par défaut (Index 0 pour l'option "-U"). Les ordres 
				  suivants correspondent à nos ordres sur les différents serveurs.
	Joueur:		  est le nom du joueur en respectant les majuscules et caractères spéciaux mais en ommetant
				  tous les blancs avant ou après le nom. S'il y a des caractères Unicode, ces derniers sont
				  remplacés par des points d'interrogation.
	UTC:		  est le décalage par rapport au temps universel.
	Clé:		  est le code de sécurité (6 symboles). Ce champ doit-être mis à jour tous les mois et elle
				  doit être demandé individuellement.
	BaseDeDonnée: indique le chemin où l'on retroruve le répertoire "BaseDeDonnée/". Par défaut, le programme
				  cherche ce répertoire où le programme est exécuté. Si l'on demeure dans cette configuration,
				  il n'est pas nécessaire d'utiliser ce champs dans le fichier d'initialisation.

V- Mise à jour rapide de vos chateaux.

L'option -M du programme permet de mettre à joueur la base de donnée interne du programme. L'option est suivi
d'un fichier texte dont le nom est "Nom_Du_Joueur.txt". Nom_Du_Joueur est la chaîne de caractère réprésentant
le nom du joueur avec tous ces caractères spécaux sauf les blancs en début et à la fin du nom qui sont exclu. 
S'il y a des caractères Unicode, ces derniers sont remplacés par des points d'interrogation.

VI- Mise à jour de la base de données.

La validité des résultats du programme Armageudon dépend de sa base de donnée. Le programme possède sa propre
base de données internes qui est mise à jour à chaque version importante du programme. Cette base de données
contient essentiellement les descriptions de notre ordre, de nos alliées et de tous les chateaux les 3
constituant. Par définition même du but ultime de ce programme, nos ennemis ne collaborent pas à cette base de
données internes. Les informations sur les chateaux ennemis et la puissance de nos ennemis constituent une 
information indispensable pour le programme. Tous le monde, même nos ennemis, ont accès à la base de données 
externes du programme Armageudon. C'est de cette manière que fonction GITHUB et "TortoiseGIT". Les accès en 
lecture sont disponibles à tous. 

i) Écriture dans la base de données locales.

L'écriture et la mise à jour est aussi disponible. C'est une des beautés de l'environnement GIT. Si vous
mettez à jour, ajoutez des nouveaux fichiers, vous vous aperceverez que vous êtes aussi capable de modifier
ces données et des livrer (Commande "Git Livrer...") et que cela vous donera une nouvelle verson dans la base
de données GIT.  Vous êtes donc capable de faire évoluer la base de données externe d'Armaguedon sur votre 
ordinateur et de bénificier de toutes les fonctionnalités d'Un système de suivi de version (C.est à dire, la 
possibilité de revenir en arrière sur des versions antérieurs et de partager et fusionner l'ensemble des 
autres modifications qui ont été faites par d'autres contributeurs. GIT devient alors un outil très puissant
pour maintenir la base de données d'Armaguedon à jour.

ii) Partage des mises à jour de la base données.

Jusqu'à maintenant, toutes les commandes GIT n'affectent que votre GIT local. Étant donné que GIT est un outil
totalement décentralisé, toutes vos modifications sont comme si vous étiez propriétaire de l'ensemble du
travail et des modifications qui ont été faites dans GIT. Cela est possible parce que quand vous avez fait
votre premier accès à GITHUB, l'entièreté de la base de données GIT et de toutes les modifications déjà 
inscrites ont été copié sur votre disque. Avec GIT, les "backup" sont inutiles puisque n'est porte quel copie 
peut devenir le serveur principale. L'autre avantage est que nous n'avons pas besoin d'accéder au réseau pour
travailler avec GIT.

Tout cela est bien beau, mais il faut de temps à autre partager nos modifications avec celles des autres. Il
faut donc utiliser le réseau. Cette synchronisation peut se faire avec les commandes "GIT tirer..." (Pour se
procurer les mises à jours de l'autre base de données GIT) et "GIT pousser..." (Pour amener nos modifications
de l'autre base de données GIT). Techniquement, cela peut être réaliser à partir de n'importe quelle base de
données GIT mais l'intérêt est d'avoir une base de données GIT communes à tous. Dans notre cas, c'est GITHUB
qui assurera cette unification. Il faut alors se plier aux exigences de ce serveur en particulier.

iii) Transaction avec GITHUB

Pour l'accès en lecture, il n'y a pas de restriction d'aucune sorte, on peut s'approprié une copie de la base
de données GIT (Ce que vous avez déjà réalisé si vous lisez ce texte!) et utiliser la commande "GIT tirer..."
pour obtenir les dernières modifications du logiciel.

Pour la livraison de modifications, il faut s'assurer de l'intégrité des données. Dans notre cas, un de nos
ennemis dans ce jeu pourrait, s'il connait le projet GITHUB, s'amuser à mettre n'importe quelle information
erronnée dans notre base de données. Il pourrait même essayer de la détruire (Ce serait de vains efforts
puisque GIT n'efface jamis l'information et que même s'il réussirait à faire cela, n'importe quel des autres
copies du projet sur nos ordinateurs pourrient reconstituer la base de données GIT)! Pour éviter ces
désagréments GITHUB propose plusieurs techniques de sécurité. Nous avons chosi un des plus simple qui
consiste à ne donner accès à des contributeurs bien identifiés. L'information exigée est votre nom et votre
émail. Donc, si vous vouler livrer vos modifications (avec "GIT pousser"), veuillez nous faire parvenir les
informations pour que l'on puisse vous inscrire dans la liste des contributeurs.

iv) Format des fichiers (Description des châteaux d'un joueur).
 
Le format de définition *.txt d'un joueur correspond aux fichiers de l'option "-M" (Voir la descrition de 
cette option à la section III).  Pour les chateaux dont les coordonnées sont inconnues, il faut préserver le
"[|]" sinon ce fichier sera incompris par le programme Armaguedon.

Note importante: Sur le serveur international ("int"), les coordonnées des châteaux ne sont pas disponibles aux
				 joueurs. NE PAS METTRE LES COORDONNÉES DES CHÂTEAUX DE NOS MEMBRES OU DES NOS ORDRES ALLIÉS.
				 C'est une question de sécurité car l'ensemble des données sur le serveur GITHUB sont puliques
				 et accessibles à tous. Sur les autres serveurs, cela n'a pas d'importance parce que les
				 coordonnées des châteaux sont accessibles à tous les joueurs en tout temps.

Les fichiers de description d'un ordre correspond à un "copie/coller" des membres d'un ordre tel que vue par
le chef de l'ordre ou ceux qui ont le privilège d'accepter ou de refuser un membre. Donc, le "copie/coller" 
n'est pas accssible aux membres réguliers d'un ordre. Pour la définition des ordres ennemis, l'accès au menu
pour ces informations, est impossible. Il a un fichier similaire qui peut-être créer. Il est disponible dans
la base de données du programme Armaguedon. Ne mettez pas à jour ce fichiers sans le consentement du chef de
l'ordre car la définition des ordres ennemis ne correspond pas nécessairement à la définition du jeu.






